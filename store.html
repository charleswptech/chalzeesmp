<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ChalzeeSMP — Beta Shop</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;800&display=swap" rel="stylesheet">
<style>
:root {
  --bg:#131415;
  --panel:#1b1d21;
  --panel-2:#202328;
  --text:#f3f5fb;
  --muted:#9aa3b2;
  --chip:#272a31;
  --chip-active:#0b61ff;
  --cta:#1677ff;
  --cta-2:#0b61ff;
  --danger:#ff4d4d;
  --radius:20px;
  --shadow: 0 14px 30px rgba(0,0,0,.45);
}
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:"Outfit",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--text);
  background:
    radial-gradient(900px 500px at -10% 0, rgba(22,119,255,.08), transparent 60%),
    radial-gradient(800px 500px at 110% 10%, rgba(255,77,77,.08), transparent 60%),
    linear-gradient(180deg, #0f1012, var(--bg));
  min-height:100vh;
}

/* Topbar */
.topbar {
  position:sticky; top:0; z-index:20;
  display:flex; align-items:center; justify-content:space-between;
  padding:14px 22px;
  background:rgba(15,16,18,.85);
  backdrop-filter:blur(8px);
  border-bottom:1px solid rgba(255,255,255,.06);
}
.brand { font-weight:800; font-size:1.1rem }
.cart-btn {
  background:linear-gradient(135deg,var(--cta),var(--cta-2));
  color:#fff; border:none; padding:10px 16px; border-radius:14px;
  font-weight:800; cursor:pointer;
  box-shadow:0 6px 16px rgba(22,119,255,.35);
  transition:transform .2s ease;
}
.cart-btn:hover { transform:scale(1.05); }

/* Shop grid */
.wrap {max-width:1200px; margin:0 auto; padding:32px;}
.grid {
  display:grid; gap:28px;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
}

.card {
  position: relative;
  background: linear-gradient(180deg, var(--panel), var(--panel-2));
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 24px;
  padding: 60px 20px 26px 20px;
  box-shadow: var(--shadow);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
  opacity: 0;
  transform: translateY(40px);
}

.card.show { opacity:1; transform:translateY(0); transition:.6s ease; }
.card.big { grid-column: span 2; }
.card:hover { transform:translateY(-6px); box-shadow:0 18px 34px rgba(0,0,0,.55); }

.title { font-size:1.4rem; font-weight:800; margin:8px 0 6px }
.price { color:var(--muted); margin-bottom:14px; font-weight:600 }

.badge {
  position:absolute; right:18px; top:18px;
  background:#ffb21f; color:#111; font-weight:900;
  padding:6px 12px; border-radius:999px; font-size:.78rem;
  box-shadow:0 6px 14px rgba(255,178,31,.4);
}

/* Perks list */
ul {padding-left:20px; margin:10px 0 18px; text-align:left;}
ul li {margin-bottom:6px; color:var(--text); position:relative; list-style:none; padding-left:22px;}
ul li::before {
  content:"✔"; position:absolute; left:0; color:#20d07a; font-weight:700;
}

/* Chips */
.chips {display:flex; gap:8px; flex-wrap:wrap; margin:12px 0 18px}
.chip {
  background:var(--chip); color:#cbd3e1; border:none; border-radius:12px;
  padding:10px 12px; font-weight:800; cursor:pointer;
  transition: transform .08s ease, background .2s ease;
}
.chip:hover { transform:scale(1.05); }
.chip.active {
  background:var(--chip-active); color:#fff;
  box-shadow:0 6px 16px rgba(11,97,255,.35);
}

/* Buttons */
.add {
  display:flex; align-items:center; justify-content:center; gap:8px;
  width:100%; padding:14px 16px; border-radius:14px; border:none;
  background:linear-gradient(135deg,var(--cta),var(--cta-2)); color:white;
  font-weight:900; cursor:pointer;
  box-shadow:0 10px 24px rgba(22,119,255,.35);
  transition: transform .2s ease;
}
.add:hover { transform:translateY(-2px); }
.add svg {width:18px; height:18px}

/* Cart drawer */
.drawer {
  position:fixed; inset:0 0 0 auto; width:min(420px, 92vw);
  transform: translateX(110%);
  transition: transform .35s cubic-bezier(.4,0,.2,1);
  background:#0f1114; z-index:40; display:flex; flex-direction:column;
  border-left:1px solid rgba(255,255,255,.08);
  box-shadow: -14px 0 28px rgba(0,0,0,.5);
}
.drawer.open { transform:translateX(0); }
.drawer-header {
  padding:16px 18px; background:rgba(255,255,255,.03);
  display:flex; align-items:center; justify-content:space-between;
  border-bottom:1px solid rgba(255,255,255,.08); font-weight:800;
}
.drawer-body { padding:14px 16px; overflow:auto; flex:1 }
.line { display:flex; align-items:center; justify-content:space-between; gap:10px; padding:10px 0; border-bottom:1px solid rgba(255,255,255,.06); }
.line .meta {display:flex; flex-direction:column; text-align:left}
.mini { color:var(--muted); font-size:.9rem }
.qtySelect { background:var(--chip); color:#fff; border:none; padding:8px 10px; border-radius:10px; font-weight:800 }
.remove { background:transparent; border:1px solid rgba(255,255,255,.18); color:#fff; padding:6px 10px; border-radius:10px; cursor:pointer }

.drawer-footer {
  padding:16px; border-top:1px solid rgba(255,255,255,.08); display:flex; flex-direction:column; gap:10px;
}
.total { display:flex; align-items:center; justify-content:space-between; font-weight:900 }
.checkout {
  padding:12px 14px; border-radius:12px; border:none; font-weight:900; cursor:pointer;
  background:linear-gradient(135deg,#20d07a,#10b981); color:#04120c;
  transition: transform .2s ease;
}
.checkout:hover { transform:translateY(-2px); }

/* Badge Animations */
.key-badge {
  position: absolute;
  top: 5px;
  left: 10%;
  transform: translateX(-50%);
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  background: rgba(255,255,255,0.05);
  box-shadow: 0 0 20px rgba(255,255,255,0.15);
  animation: floatBadge 3s ease-in-out infinite;
  z-index: 10;
}
.key-badge svg { width:24px; height:24px; stroke:#fff; }
.key-badge.common { background:rgba(54,209,106,.15); box-shadow:0 0 20px rgba(54,209,106,.5); }
.key-badge.gold { background:rgba(255,178,31,.15); box-shadow:0 0 20px rgba(255,178,31,.5); }
.key-badge.amethyst { background:rgba(176,124,255,.15); box-shadow:0 0 20px rgba(176,124,255,.5); }
.key-badge.prime { background:rgba(91,182,255,.15); box-shadow:0 0 20px rgba(91,182,255,.5); }
.key-badge.chalzee { background:rgba(16,185,129,.2); box-shadow:0 0 30px rgba(16,185,129,.6); }
.key-badge.chalzee::before { content:"👑"; font-size:26px; animation: pulse 1.6s infinite; }

@keyframes floatBadge { 0%,100%{transform:translateY(0);}50%{transform:translateY(-6px);} }
@keyframes pulse { 0%,100%{transform:scale(1);opacity:1;}50%{transform:scale(1.2);opacity:0.7;} }

/* Sparkle background */
body::before {
  content:"";
  position:fixed; inset:0;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" fill="white" opacity="0.15"><circle cx="2" cy="2" r="2"/></svg>');
  background-size:100px 100px;
  animation: sparkleMove 40s linear infinite;
  pointer-events:none; z-index:0;
}
@keyframes sparkleMove { from{background-position:0 0;} to{background-position:1000px 1000px;} }

/* Chalzee+ popup */
#chalzeePopup {
  position: fixed;
  inset: 0;
  background: rgba(10, 10, 15, 0.96);
  backdrop-filter: blur(6px);
  display: none;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  z-index: 100;
}
#chalzeePopup.show {
  display: flex;
  animation: warpIn 1s ease forwards, shakeRocket 1s ease-in-out;
}
#chalzeePopup h1 { font-size: 2rem; margin-bottom: 16px; }
#chalzeePopup ul { max-width: 500px; margin: 16px 0; }
#chalzeePopup button {
  margin-top: 20px;
  padding: 14px 24px;
  border: none;
  border-radius: 14px;
  font-weight: 900;
  cursor: pointer;
  background: linear-gradient(135deg, #10b981, #20d07a);
  color: #fff;
  box-shadow: 0 8px 20px rgba(16,185,129,.4);
  transition: transform .2s ease;
}
#chalzeePopup button:hover { transform: scale(1.05); }

/* Warp streaks */
#warpEffect {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 99;
  display: none;
  overflow: hidden;
}
#warpEffect.active { display: block; }

.warp-line {
  position: absolute;
  width: 2px;
  height: 80px;
  background: linear-gradient(to bottom, #10b981, transparent);
  top: -100px;
  animation: streakDown 1s linear forwards;
  opacity: 0.8;
}
@keyframes streakDown {
  from { transform: translateY(-120px); opacity: 1; }
  to { transform: translateY(110vh); opacity: 0; }
}

/* Rocketshake + popup warp */
@keyframes shakeRocket {
  0%,100% { transform: translate(0,0); }
  20% { transform: translate(-10px, 5px); }
  40% { transform: translate(12px, -6px); }
  60% { transform: translate(-8px, 8px); }
  80% { transform: translate(6px, -4px); }
}
@keyframes warpIn {
  from { transform: scale(0.7); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}
#chalzeePopup .popup-content {
  max-height: 80vh;       /* keep it within viewport */
  overflow-y: auto;       /* enable scrolling */
  padding: 20px;
  background: rgba(20, 20, 30, 0.8);
  border-radius: 16px;
  box-shadow: 0 8px 30px rgba(0,0,0,.5);
}

</style>
</head>
<body>

<div class="topbar">
  <div class="brand">ChalzeeSMP — Beta Shop</div>
  <button class="cart-btn" id="openCartBtn">View Cart (<span id="cartCount">0</span>)</button>
</div>

<!-- Warp streak effect -->
<div id="warpEffect"></div>

<!-- Chalzee+ Popup --> <div id="chalzeePopup"> <div class="popup-content"> <h1>🚀 Chalzee+ Perks</h1> <h2>Base Perks:</h2> <ul> <li>Orbs earned at double speed</li> <li>/fly in lobbies</li> <li>Extra Space in E-Chest</li> <li>Access to Chalzee+ only giveaways and events</li> <li>1 Mythic key a month</li> <li>Ability to Beta Test new features</li> <li>Role in Discord and chalzee+ chat</li> <li>Your own voice room</li> </ul> <h2>Perks Unlocked After 3 Months</h2> <ul> <li>2 Mythic Keys a month</li> <li>Orbs at triple speed</li> </ul> <h2>Perks Unlocked After 6 Months</h2> <ul> <li>4 Mythic keys a month</li> <li>Orbs at 4x speed</li> <li>1 Legendary key a month</li> </ul> <h2>Perks Unlocked after 1 Year</h2> <ul> <li>Gift Chalzee+ to your friend for a month for free!</li> </ul> <p style="margin-top:12px; color:var(--muted); font-size:0.9rem;"> ⚠️ If you unsubscribe you reset your perks. You can buy keys in the shop (limit applies so you can’t be OP). </p> <button id="chalzeeConfirm">Confirm Add to Cart</button> <button onclick="closeChalzeePopup()" style="margin-top:10px;background:#444;">Cancel</button> </div> </div>
<div class="wrap" id="shopWrap">
  <div class="grid" id="grid"></div>
</div>

<aside class="drawer" id="drawer">
  <div class="drawer-header">
    <span>Your Cart</span>
    <button class="remove" id="closeCartBtn">Close</button>
  </div>
  <div class="drawer-body" id="drawerBody">
    <p class="muted">Your cart is empty.</p>
  </div>
  <div class="drawer-footer">
    <div class="total"><span>Total</span><span id="total">$0.00</span></div>
    <button class="checkout" id="checkoutBtn">Checkout</button>
    <p class="muted" style="margin:0">no real payments.</p>
  </div>
</aside>

<script>
const products = [
  { id: 'common',    name: 'Common Key',    price: 0.99,  color: '#36d16a' },
  { id: 'gold',      name: 'Gold Key',      price: 3.99,  color: '#ffb21f' },
  { id: 'amethyst',  name: 'Amethyst Key',  price: 4.99,  color: '#b07cff', badge: 'Most Popular' },
  { id: 'prime',     name: 'Prime Key',     price: 2.99,  color: '#5bb6ff' },
  { id: 'chalzee',   name: 'Chalzee+',      price: 3.99,  color: '#10b981', perks: [
      'Exclusive Discord role',
      'Access to beta test features',
      'Your own voice room in the Discord server',
      'Extra crate keys',
      'Priority Queue',
      'Exclusive Chalzee+ events and giveaways'
    ], big:true }
];
const qtyOptions = [1,5,10,15,20,30];
const chalzeeMonths = [1,3,6];
let selectedQty = {}; 
let cart = [];       

// Render products
function renderGrid(){
  const grid = document.getElementById('grid');
  grid.innerHTML = '';
  products.forEach((p) => {
    selectedQty[p.id] = 1;
    const card = document.createElement('div');
    card.className = 'card' + (p.big ? ' big' : '');

    const badge = document.createElement('div');
    if(p.id === 'chalzee'){
      badge.className = 'key-badge chalzee';
    } else {
      badge.className = 'key-badge ' + p.id;
      badge.innerHTML = `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M6 6h15l-1.5 9h-12z"/><path d="M6 6l-2-2"/><circle cx="9" cy="20" r="1.5"/><circle cx="17" cy="20" r="1.5"/>
      </svg>`;
    }
    card.appendChild(badge);

    if (p.badge){
      const b = document.createElement('div');
      b.className = 'badge';
      b.textContent = p.badge;
      card.appendChild(b);
    }

    const title = document.createElement('div'); title.className='title'; title.textContent=p.name; card.appendChild(title);
    const price = document.createElement('div'); price.className='price'; price.textContent = p.perks ? `$${p.price.toFixed(2)}/month` : `$${p.price.toFixed(2)}`; card.appendChild(price);

    if(p.perks){
      const ul = document.createElement('ul');
      p.perks.forEach(perk=>{ const li=document.createElement('li'); li.textContent=perk; ul.appendChild(li); });
      card.appendChild(ul);
    }

    // Qty chips
    const chips = document.createElement('div'); chips.className='chips';
    const options = p.id === 'chalzee' ? chalzeeMonths : qtyOptions;
    options.forEach(q=>{
      const c=document.createElement('button');
      c.className='chip'+(q===1?' active':'');
      c.textContent = p.id === 'chalzee' ? `${q} month${q>1?'s':''}` : q;
      c.onclick=()=>selectQty(p.id,q,card,p.id==='chalzee');
      chips.appendChild(c);
    });
    card.appendChild(chips);

    // Add button
    const addBtn=document.createElement('button');
    addBtn.className='add';
    if(p.id==='chalzee'){
      addBtn.textContent='🚀 Get Chalzee+';
    } else {
      addBtn.innerHTML=`<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 001.94 1.61h9.72a2 2 0 001.94-1.61L23 6H6"/>
      </svg> Add to Cart`;
    }
    addBtn.onclick=()=>handleAdd(p);
    card.appendChild(addBtn);

    grid.appendChild(card);
  });
}
function selectQty(id,q,card,isChalzee=false){
  selectedQty[id]=q;
  card.querySelectorAll('.chip').forEach(ch=>ch.classList.remove('active'));
  card.querySelectorAll('.chip').forEach(ch=>{
    if(isChalzee ? ch.textContent.startsWith(q) : parseInt(ch.textContent)==q){
      ch.classList.add('active');
    }
  });
}
function handleAdd(p){
  if(p.id==='chalzee'){
    triggerWarpStreaks();
    document.getElementById('chalzeePopup').classList.add('show');
    return;
  }
  addToCart(p);
}
document.getElementById('chalzeeConfirm').onclick=function(){
  const p = products.find(p=>p.id==='chalzee');
  addToCart(p);
  closeChalzeePopup();
};
function closeChalzeePopup(){
  document.getElementById('chalzeePopup').classList.remove('show');
}
function addToCart(p){
  const qty=selectedQty[p.id];
  const existing=cart.find(i=>i.id===p.id);
  if(existing){existing.qty+=qty;} else {cart.push({id:p.id,name:p.name,price:p.price,qty});}
  updateCart();
}
function updateCart(){
  const body=document.getElementById('drawerBody');
  const count=cart.reduce((s,i)=>s+i.qty,0);
  document.getElementById('cartCount').textContent=count;
  body.innerHTML='';
  if(cart.length===0){body.innerHTML='<p class="muted">Your cart is empty.</p>';return;}
  cart.forEach(item=>{
    const line=document.createElement('div'); line.className='line';
    const meta=document.createElement('div'); meta.className='meta'; meta.innerHTML=`<strong>${item.name}</strong><span class="mini">$${item.price.toFixed(2)}</span>`;
    const controls=document.createElement('div');
    const select=document.createElement('select'); select.className='qtySelect';
    const options = item.id==='chalzee' ? chalzeeMonths : qtyOptions;
    options.forEach(q=>{
      const opt=document.createElement('option');
      opt.value=q; opt.textContent = item.id==='chalzee' ? `${q} month${q>1?'s':''}` : q;
      if(q===item.qty) opt.selected=true;
      select.appendChild(opt);
    });
    select.onchange=e=>{item.qty=parseInt(e.target.value); updateCart();};
    const remove=document.createElement('button'); remove.className='remove'; remove.textContent='X'; remove.onclick=()=>{cart=cart.filter(x=>x.id!==item.id); updateCart();};
    controls.appendChild(select); controls.appendChild(remove);
    line.appendChild(meta); line.appendChild(controls);
    body.appendChild(line);
  });
  const total=cart.reduce((s,i)=>s+i.qty*i.price,0);
  document.getElementById('total').textContent=`$${total.toFixed(2)}`;
}
document.getElementById('openCartBtn').onclick=()=>document.getElementById('drawer').classList.add('open');
document.getElementById('closeCartBtn').onclick=()=>document.getElementById('drawer').classList.remove('open');
document.getElementById('checkoutBtn').onclick=()=>alert('Checkout not implemented.');

// Warp streaks generator
function triggerWarpStreaks(){
  const warp=document.getElementById('warpEffect');
  warp.innerHTML='';
  warp.classList.add('active');
  for(let i=0;i<20;i++){
    const line=document.createElement('div');
    line.className='warp-line';
    line.style.left=Math.random()*100+'vw';
    line.style.animationDuration=(0.6+Math.random()*0.5)+'s';
    warp.appendChild(line);
  }
  setTimeout(()=>warp.classList.remove('active'),1000);
}

// Animate cards on scroll
const obs=new IntersectionObserver(entries=>{
  entries.forEach(entry=>{
    if(entry.isIntersecting){entry.target.classList.add('show'); obs.unobserve(entry.target);}
  });
},{threshold:.2});
function init(){
  renderGrid();
  document.querySelectorAll('.card').forEach(c=>obs.observe(c));
}
init();
</script>
</body>
</html>
